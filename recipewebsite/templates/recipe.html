{% extends "base.html" %}
{% block title %}{{ recipe.name_recipe }}{% endblock %}
{% include "header.html" %}
{% block content %}
<div class="container">

		<div class="row">
				<div class="col-12">
						<div class="recipe-page-content row">
								<div class="recipe-dates col-6">
										<div class="recipe-date-created">Created on {{recipe.date_created|date:"j F Y"}}</div>
										<div class="recipe-date-updated">Last edited on {{recipe.date_updated|date:"j F Y"}}</div>
								</div>
								<div class="recipe-author col-6">
										<img class="recipe-author-image">
										<div class="recipe-author-name">
												<a href="{% url 'profile' recipe.creator.id %}">
														<img src="{{ recipe.creator.avatar.url }}" height="40px" width="40px">
														{{recipe.creator.first_name}}
												</a>
										</div>
								</div>
								<h1 class="recipe-title col-12">
										{{ recipe.name }}
										{% if recipe.creator.id == request.user.id%}
										<a href="{% url 'editRecipe' recipe.id %}" class="btn btn-info" >
												<i class="bi bi-pen"></i>
										</a>
										<a href="{% url 'delete_recipe' recipe.id %}" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal" data-recipe-id="{{ recipe.id }}">
												<i class="bi bi-trash"></i>
										</a>
										{% endif %}
								</h1>
								<img
										class="full-recipe-photo"
										src="{{recipe.sliderImg.url}}"
										alt="{{recipe.name}}"
								/>
								<div class="recipe-difficulty col-6">
										Difficulty&nbsp;
										<i class="bi {% if recipe.difficulty >= 1 %}bi-star-fill{% else %}bi-star{% endif %}"></i>
										<i class="bi {% if recipe.difficulty >= 2 %}bi-star-fill{% else %}bi-star{% endif %}"></i>
										<i class="bi {% if recipe.difficulty >= 3 %}bi-star-fill{% else %}bi-star{% endif %}"></i>
										<i class="bi {% if recipe.difficulty >= 4 %}bi-star-fill{% else %}bi-star{% endif %}"></i>
										<i class="bi {% if recipe.difficulty >= 5 %}bi-star-fill{% else %}bi-star{% endif %}"></i>
								</div>
								<div class="recipe-duration col-6">
										<i class="bi bi-clock"></i> {{ recipe.duration }} Minutes
								</div>
								<div class="recipe-description col-12">{{ recipe.description }}</div>
								<ul class="recipe-content-list">
										{% for note in notes %}
										<li class="recipe-content-item">{{note.content}}</li>
										{% endfor %}
								</ul>
								<div class="recipe-ingredients">
										<ul>
												<h3>Ingredients</h3>
												{% for ingredient in ingredients.all %}
												<li class="ingredient-item">{{ ingredient.text }}</li>
												{% endfor %}
										</ul>
								</div>
								<div class="recipe-steps">
										<ul class="recipe-steps-list">
												<h3>Preparation steps</h3>
												{% for step in steps %}
												<li class="recipe-steps-item">{{ step.text }}</li>
												{% endfor %}
										</ul>
								</div>
						</div>
				</div>
		</div>

</div>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header bg-danger text-white">
				<h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				Delete?
			</div>
			<div class="modal-footer">
				<form method="POST" id="delete-form">
					{% csrf_token %}
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
					<button type="submit" class="btn btn-danger">Yes, Delete</button>
				</form>
			</div>
		</div>
	</div>
</div>

{% endblock %}